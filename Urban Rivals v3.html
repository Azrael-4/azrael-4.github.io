<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UR - Combate</title>
    <style>
        * {margin: 0; padding: 0; box-sizing: border-box;  font-family: Verdana;}
        img {vertical-align: middle;}
        body {padding: 0.5em; font-size: 1em; background-color: black; color: white;}
        #batalhar {padding: 0.5em; width: 100%;}
        #batalhar:hover {opacity: 0.8;}
        .divcombate {border: 1px solid white; padding: 0.5em; width: 100%;}
        .divcombate1, .divcombate2 {width: 49.5%; display: inline-block; border: 1px solid white; text-align: center;}
        #logbatalha {width: 100%; height: 6em;}
        .titulojogadores {margin: 0.5em;}
        #personagemJogador1, #personagemJogador2 {margin-bottom: 0.5em; padding: 0.25em;}
        #gastarJogador1, #gastarJogador2 {margin-bottom: 0.5em; padding: 0.25em; text-align: center;}
        
        .divtextodelog {border: 2px outset white; height: 15em; padding: 0.5em; overflow-x: hidden; overflow-y: scroll; line-height: 1.8em; background-image: url('arquivos/logo.png'); background-repeat: no-repeat; background-position-x: center; background-position-y: -5em;}
        .divtextodelog p {background-color: none;}

        /* Cards */
        
    
        .bordacard {display: inline-block; margin: 1em;}
        .tabelacard {table-layout: fixed; border-collapse: separate; border-spacing: 0px; border: 4px solid rgb(145, 53, 53); width: 238px; height: 332px; border-radius: 10px; text-align: center; font-size: 16px; overflow: hidden; background-color: white; color: black;}
        .tabelacard td {border: 1px solid black; font-family: 'Times New Roman';}
        .td1, .td5, .td7 {width: 40px;}
        .td1 img, .td4 img {width: 24px;}
        .td2 {font-weight: bold;}
        .td3 img {height: 160px;}
        .td6, .td8 {font-size: 12px; height: 31px;}
        .td9 {font-size: 8px; text-align: right;}
    </style>
</head>
<body>
    <div class="divcombate">
        <div class="divcombate1">
            <!-- Escolha dos Personagens para o Jogador 1 -->
            <div id="jogador1">
                <h3 class="titulojogadores">Cards do Jogador 1</h3>
                <select id="personagemJogador1" onchange="atualizarCard('personagemJogador1')" autocomplete="off">
                    <option hidden disabled selected value="vazio"> -- Escolha um card -- </option>
                    <optgroup label="Bangers / Ulu Watu (Pot√™ncia +2)">
                        <option value="Willy">Willy (‚≠ê: 5, üëä: 5, üí•: 7, ‚ö°: Coragem: Pot√™ncia +4)</option>
                    </optgroup>
                    <optgroup label="üëï All Stars (Pot√™ncia advers√°ria -2, m√≠n 1)">
                        <option value="Oyoh">Oyoh (‚≠ê: 5, üëä: 7, üí•: 7, ‚ö°: -</option>
                    </optgroup>
                    <optgroup label="ü§ñ Junkz / üëÆ Sentinel (Ataque +8)">
                        <option value="Fuzz">Fuzz (‚≠ê: 5, üëä: 6, üí•: 8, ‚ö°: Anula habilidade do oponente)</option>
                    </optgroup>
                    <optgroup label="ü™ê Sakrohm (Ataque advers√°rio -8, m√≠n 3)">
                        <option value="Stella">Stella (‚≠ê: 5, üëä: 7, üí•: 6, ‚ö°: Ataque +8)</option>
                    </optgroup>
                    <optgroup label="ü•∑ Fang Pi / üí£ La Junta (Dano +2)">
                        <option value="Emeth">Emeth (‚≠ê: 5, üëä: 7, üí•: 7, ‚ö°: Apoio: +5 Ataque)</option>
                    </optgroup>
                    <optgroup label="üòº Pussycats (Dano advers√°rio -2, m√≠n 1)">
                        <option value="Clara">Clara (‚≠ê: 5, üëä: 8, üí•: 5, ‚ö°: Anula b√¥nus do oponente)</option>
                    </optgroup>
                </select>
                <label for="vidaJogador1">‚ù§Ô∏è: <span id="vidaJogador1">12</span></label>
                <br>
                <label for="gastarJogador1">P√≠lulas para gastar:</label>
                <input type="number" id="gastarJogador1" min="0" max="12" value="0" autocomplete="off">
                <label for="pilulasJogador1">üíä: <span id="pilulasDisponiveisJogador1">12</span></label>
            </div>

            <div id="tabelacardjogador1">
                <div class="bordacard">
                    <table class="tabelacard">
                      <tr><td class="td1"><img id="personagemJogador1clan" src="https://static.wikia.nocookie.net/urban-rivals/images/7/7c/OCULUS_Symbol.png/revision/latest?cb=20210211152704"></td><td class="td2" id="personagemJogador1nome">Nome</td></tr>
                      <tr><td class="td3" colspan="2"><img id="personagemJogador1imagem" src="htps://static.wikia.nocookie.net/urban-rivals/images/8/8b/GHEIST_METHANE_N4_STD.png/revision/latest?cb=20110625205023"></td></tr>
                      <tr><td class="td4" colspan="2"><img id="personagemJogador1level" src="https://th.bing.com/th/id/R.74856ae740c51fc54bed8586bb7ed4b8?rik=SwasNs97EItuCA&riu=http%3a%2f%2fpng-2.vector.me%2ffiles%2fimages%2f3%2f1%2f315456%2fsimple_star_thumb&ehk=knSDllBBJlnob5tV0vcZeYTTvIg9tHq57eYdANf6X4o%3d&risl=&pid=ImgRaw&r=0"></td></tr>
                      <tr><td class="td5" id="personagemJogador1potencia">Pot</td><td class="td6" id="personagemJogador1habilidade">Habilidade</td></tr>
                      <tr><td class="td7" id="personagemJogador1dano">Dan</td><td class="td8" id="personagemJogador1bonus">B√¥nus</td></tr>
                      <tr><td class="td9" colspan="2" id="personagemJogador1edicao">STA 01/204&nbsp;</td></tr>
                    </table>
                </div>
            </div>

        </div>
    
    <div class="divcombate2">
        <!-- Escolha dos Personagens para o Jogador 2 -->
        <div id="jogador2">
            <h3 class="titulojogadores">Cards do Jogador 2</h3>
            <select id="personagemJogador2" onchange="atualizarCard('personagemJogador2')" autocomplete="off"></select> <!-- Aqui costumava ter uma lista repetida, mas criei uma fun√ß√£o para copiar o deck do Jogador 1-->
            <label for="vidaJogador2">‚ù§Ô∏è: <span id="vidaJogador2">12</span></label>
            <br>
            <label for="gastarJogador2">P√≠lulas para gastar:</label>
            <input type="number" id="gastarJogador2" min="0" max="12" value="0" autocomplete="off">
            <label for="pilulasJogador2">üíä: <span id="pilulasDisponiveisJogador2">12</span></label>
        </div>
        <div id="tabelacardjogador2">
            <div class="bordacard">
                <table class="tabelacard">
                    <tr><td class="td1"><img id="personagemJogador2clan" src="https://static.wikia.nocookie.net/urban-rivals/images/7/7c/OCULUS_Symbol.png/revision/latest?cb=20210211152704"></td><td class="td2" id="personagemJogador2nome">Nome</td></tr>
                    <tr><td class="td3" colspan="2"><img id="personagemJogador2imagem" src="htps://static.wikia.nocookie.net/urban-rivals/images/8/8b/GHEIST_METHANE_N4_STD.png/revision/latest?cb=20110625205023"></td></tr>
                    <tr><td class="td4" colspan="2"><img id="personagemJogador2level" src="https://th.bing.com/th/id/R.74856ae740c51fc54bed8586bb7ed4b8?rik=SwasNs97EItuCA&riu=http%3a%2f%2fpng-2.vector.me%2ffiles%2fimages%2f3%2f1%2f315456%2fsimple_star_thumb&ehk=knSDllBBJlnob5tV0vcZeYTTvIg9tHq57eYdANf6X4o%3d&risl=&pid=ImgRaw&r=0"></td></tr>
                    <tr><td class="td5" id="personagemJogador2potencia">Pot</td><td class="td6" id="personagemJogador2habilidade">Habilidade</td></tr>
                    <tr><td class="td7" id="personagemJogador2dano">Dan</td><td class="td8" id="personagemJogador2bonus">B√¥nus</td></tr>
                    <tr><td class="td9" colspan="2" id="personagemJogador2edicao">STA 01/204&nbsp;</td></tr>
                </table>
            </div>
        </div>
    </div>
    
        <br><br>
        <button id="batalhar">Batalhar</button>
        <br><br>
        <div class="divtextodelog"><p id="textodelog"></p></div>

    </div>

    <div class="divaudios" style="position: fixed; bottom: 0px;">
        <audio controls><source src="arquivos/mp3/Rooftops from Clint City.mp3" type="audio/ogg"></audio>
        <br>
        <audio controls><source src="arquivos/mp3/Music 2.m4a" type="audio/mpeg"></audio>
        <br>
        <audio controls><source src="arquivos/mp3/Music 3.m4a" type="audio/mpeg"></audio>
    </div>
<script>
    // Vari√°veis Globais
    let totalPilulasJogador1 = 12;
    let totalPilulasJogador2 = 12;
    let roundnumber = 1;
    let vidaJogador1 = 12;
    let vidaJogador2 = 12;

    const personagens = {
        'Willy': {nome: "Willy", clan: "https://static.wikia.nocookie.net/urban-rivals/images/a/ae/BANGERS_Symbol.png/revision/latest?cb=20190215180620", imagem: "https://static.wikia.nocookie.net/urban-rivals/images/4/41/BANGERS_WILLY_N5_STD.png/revision/latest?cb=20110702203808", level: "https://th.bing.com/th/id/R.74856ae740c51fc54bed8586bb7ed4b8?rik=SwasNs97EItuCA&riu=http%3a%2f%2fpng-2.vector.me%2ffiles%2fimages%2f3%2f1%2f315456%2fsimple_star_thumb&ehk=knSDllBBJlnob5tV0vcZeYTTvIg9tHq57eYdANf6X4o%3d&risl=&pid=ImgRaw&r=0", potencia: 5, dano: 7, habilidade: "Coragem: Pot√™ncia +4", bonus: "Pot√™ncia +2", modPotencia: (p) => p + 2, modPotenciaAdv: (p) => p, modDano: (p) => p, modDanoAdv: (p) => p, modAtaque: (p) => p, modAtaqueAdv: (p) => p},
        'Oyoh': {nome: "Oyoh", clan: "https://static.wikia.nocookie.net/urban-rivals/images/0/01/ALLSTARS_v2.png/revision/latest?cb=20190215172903", imagem: "https://static.wikia.nocookie.net/urban-rivals/images/4/4f/ALLSTARS_OYOH_N5_STD.png/revision/latest?cb=20110626175852", level: "", potencia: 7, dano: 7, habilidade: "-", bonus: "-2 Pot√™ncia do oponente", modPotencia: (p) => p, modPotenciaAdv: (p) => (p < 3 ? 1 : p - 2), modDano: (p) => p, modDanoAdv: (p) => p, modAtaque: (p) => p, modAtaqueAdv: (p) => p},
        'Fuzz': {nome: "Fuzz", clan: "https://static.wikia.nocookie.net/urban-rivals/images/2/24/JUNKZ_Symbol.png/revision/latest?cb=20190215165648", imagem: "https://static.wikia.nocookie.net/urban-rivals/images/e/e5/JUNKZ_FUZZ_N5_STD.png/revision/latest?cb=20110704102723", level: "https://th.bing.com/th/id/R.74856ae740c51fc54bed8586bb7ed4b8?rik=SwasNs97EItuCA&riu=http%3a%2f%2fpng-2.vector.me%2ffiles%2fimages%2f3%2f1%2f315456%2fsimple_star_thumb&ehk=knSDllBBJlnob5tV0vcZeYTTvIg9tHq57eYdANf6X4o%3d&risl=&pid=ImgRaw&r=0", potencia: 6, dano: 8, habilidade: "Anula habilidade do oponente", bonus: "Ataque +8", modPotencia: (p) => p, modPotenciaAdv: (p) => p, modDano: (p) => p, modDanoAdv: (p) => p, modAtaque: (p) => p+8, modAtaqueAdv: (p) => p},
        'Stella': {nome: "Stella", clan: "https://static.wikia.nocookie.net/urban-rivals/images/9/97/SAKROHM_Symbol.png/revision/latest?cb=20190519131949", imagem: "https://static.wikia.nocookie.net/urban-rivals/images/8/8f/SAKROHM_STELLA_N2_STD.png/revision/latest?cb=20111213213508", level: "https://th.bing.com/th/id/R.74856ae740c51fc54bed8586bb7ed4b8?rik=SwasNs97EItuCA&riu=http%3a%2f%2fpng-2.vector.me%2ffiles%2fimages%2f3%2f1%2f315456%2fsimple_star_thumb&ehk=knSDllBBJlnob5tV0vcZeYTTvIg9tHq57eYdANf6X4o%3d&risl=&pid=ImgRaw&r=0", potencia: 7, dano: 7, habilidade: "Ataque +8", bonus: "-8 Ataque do oponente, m√≠n 3", modPotencia: (p) => p, modPotenciaAdv: (p) => p, modDano: (p) => p, modDanoAdv: (p) => p, modAtaque: (p) => p, modAtaqueAdv: (p) => (p < 11 ? 3 : p - 8)},
        'Emeth': {nome: "Emeth", clan: "https://static.wikia.nocookie.net/urban-rivals/images/8/8b/LAJUNTA_Symbol.png/revision/latest?cb=20190302170111", imagem: "https://static.wikia.nocookie.net/urban-rivals/images/1/14/LAJUNTA_EMETH_N5_STD.png/revision/latest?cb=20110723144624", level: "https://th.bing.com/th/id/R.74856ae740c51fc54bed8586bb7ed4b8?rik=SwasNs97EItuCA&riu=http%3a%2f%2fpng-2.vector.me%2ffiles%2fimages%2f3%2f1%2f315456%2fsimple_star_thumb&ehk=knSDllBBJlnob5tV0vcZeYTTvIg9tHq57eYdANf6X4o%3d&risl=&pid=ImgRaw&r=0", potencia: 7, dano: 7, habilidade: "Apoio: Ataque +5", bonus: "Dano +2", modPotencia: (p) => p, modPotenciaAdv: (p) => p, modDano: (p) => p+2, modDanoAdv: (p) => p, modAtaque: (p) => p, modAtaqueAdv: (p) => p},
        'Clara': {nome: "Clara", clan: "https://static.wikia.nocookie.net/urban-rivals/images/d/df/PUSSYCATS_Symbol.png/revision/latest?cb=20190427125950", imagem: "https://static.wikia.nocookie.net/urban-rivals/images/b/be/PUSSYCATS_CLARA_N5_STD.png/revision/latest?cb=20111213210219", level: "https://th.bing.com/th/id/R.74856ae740c51fc54bed8586bb7ed4b8?rik=SwasNs97EItuCA&riu=http%3a%2f%2fpng-2.vector.me%2ffiles%2fimages%2f3%2f1%2f315456%2fsimple_star_thumb&ehk=knSDllBBJlnob5tV0vcZeYTTvIg9tHq57eYdANf6X4o%3d&risl=&pid=ImgRaw&r=0", potencia: 8, dano: 5, habilidade: "Anula b√¥nus do oponente", bonus: "-2 Dano do oponente, m√≠n 1", modPotencia: (p) => p, modPotenciaAdv: (p) => p, modDano: (p) => p, modDanoAdv: (p) => (p < 3 ? 1 : p - 2), modAtaque: (p) => p, modAtaqueAdv: (p) => p},
    }

    document.getElementById('batalhar').addEventListener('click', function() {
        // Checagem Elton
        if (document.getElementById('personagemJogador1').value == 'vazio' || document.getElementById('personagemJogador2').value == 'vazio') {return false}
        // Jogador 1 escolhe um personagem
        let personagemJogador1 = document.getElementById('personagemJogador1').value;
        let jogador1Potencia = personagens[personagemJogador1].potencia;
        let jogador1Dano = personagens[personagemJogador1].dano;
        
        // Jogador 2 escolhe um personagem
        let personagemJogador2 = document.getElementById('personagemJogador2').value;
        let jogador2Potencia = personagens[personagemJogador2].potencia;
        let jogador2Dano = personagens[personagemJogador2].dano;
            
        // Aplicar modificadores de Pot√™ncia no personagem do jogador 1
        jogador1Potencia = personagens[personagemJogador1].modPotencia(jogador1Potencia);
        jogador1Potencia = personagens[personagemJogador2].modPotenciaAdv(jogador1Potencia);
        // Aplicar modificadores de Dano no personagem do jogador 1
        jogador1Dano = personagens[personagemJogador1].modDano(jogador1Dano);
        jogador1Dano = personagens[personagemJogador2].modDanoAdv(jogador1Dano);
        
        // Aplicar modificadores de Pot√™ncia no personagem do jogador 2
        jogador2Potencia = personagens[personagemJogador2].modPotencia(jogador2Potencia);
        jogador2Potencia = personagens[personagemJogador1].modPotenciaAdv(jogador2Potencia);
        // Aplicar modificadores de Dano no personagem do jogador 2
        jogador2Dano = personagens[personagemJogador2].modDano(jogador2Dano);
        jogador2Dano = personagens[personagemJogador1].modDanoAdv(jogador2Dano);

        // Capturar o n√∫mero de p√≠lulas que o jogador quer gastar e garantir que √© um n√∫mero v√°lido <-- Olhar
        let gastarPilulasJogador1 = parseInt(document.getElementById('gastarJogador1').value) || 0;
        let gastarPilulasJogador2 = parseInt(document.getElementById('gastarJogador2').value) || 0;

        // Verificar se o jogador est√° tentando gastar mais p√≠lulas do que possui <-- Olhar
        if (gastarPilulasJogador1 > totalPilulasJogador1) gastarPilulasJogador1 = totalPilulasJogador1;
        if (gastarPilulasJogador2 > totalPilulasJogador2) gastarPilulasJogador2 = totalPilulasJogador2;

        // Calculando a Pot√™ncia final, multiplicadando pelas p√≠lulas
        jogador1Potencia *= (gastarPilulasJogador1 + 1);
        jogador2Potencia *= (gastarPilulasJogador2 + 1);

        // Elton - Transformar a pot√™ncia final em Ataque
        let jogador1Ataque = jogador1Potencia;
        let jogador2Ataque = jogador2Potencia;

        // Aplicar modificadores de Ataque no personagem do jogador 1
        jogador1Ataque = personagens[personagemJogador1].modAtaque(jogador1Ataque);
        jogador1Ataque = personagens[personagemJogador2].modAtaqueAdv(jogador1Ataque);
        // Aplicar modificadores de Ataque no personagem do jogador 1
        jogador2Ataque = personagens[personagemJogador2].modAtaque(jogador2Ataque);
        jogador2Ataque = personagens[personagemJogador1].modAtaqueAdv(jogador2Ataque);

        // Subtrair as p√≠lulas gastas do total de p√≠lulas dispon√≠veis <-- Olhar
        totalPilulasJogador1 -= gastarPilulasJogador1;
        totalPilulasJogador2 -= gastarPilulasJogador2;

        // Atualizar a exibi√ß√£o de p√≠lulas restantes
        document.getElementById('pilulasDisponiveisJogador1').textContent = totalPilulasJogador1;
        document.getElementById('pilulasDisponiveisJogador2').textContent = totalPilulasJogador2;

        //Elton - Ajustar m√°ximo de p√≠lulas selecion√°veis ao total e zerar o valor ap√≥s a batalha
        document.getElementById('gastarJogador1').max = totalPilulasJogador1;
        document.getElementById('gastarJogador1').value = 0;
        document.getElementById('gastarJogador2').max = totalPilulasJogador2;
        document.getElementById('gastarJogador2').value = 0;

        // Escrever valores finais de ataque ap√≥s habilidades e b√¥nus
        let log1 = personagemJogador1 + ": Ataque = " + jogador1Potencia + 'x' + parseInt(gastarPilulasJogador1 + 1)  + ' + ' + (jogador1Ataque-jogador1Potencia) + ' = ' + jogador1Ataque + '\n';
        let log2 = personagemJogador2 + ": Ataque = " + jogador2Potencia + 'x' + parseInt(gastarPilulasJogador2 + 1)  + ' + ' + (jogador2Ataque-jogador2Potencia) + ' = ' + jogador2Ataque + '\n';
        let caixadetexto = document.getElementById('textodelog');
        caixadetexto.innerText += "Round " + roundnumber + '!\n';
        roundnumber++;
        caixadetexto.innerText += log1;
        caixadetexto.innerText += log2;

        // ELTON (por enquanto √© desnecess√°rio essa re-nomenclatura de vari√°veis, mas deixarei por enquanto)
        let ataqueFinalJogador1 = jogador1Ataque;
        let ataqueFinalJogador2 = jogador2Ataque;
        
        // L√≥gica de quem vence, exibindo o ataque final
        if (ataqueFinalJogador1 > ataqueFinalJogador2) {
                // Escrever quem ganha, dano causa, remover vida, ajustar o display da vida
                caixadetexto.innerText += personagemJogador1 + " vence! ¬ª Dano causado: " + jogador1Dano;
                vidaJogador2 -= jogador1Dano;
                document.getElementById('vidaJogador2').textContent = vidaJogador2;
                alert(personagemJogador1 + " vence!\n\nAtaque final de " + personagemJogador1 + ": " + ataqueFinalJogador1 + "\nAtaque final de " + personagemJogador2 + ": " + ataqueFinalJogador2 + '\n\nDano causado: ' + jogador1Dano);
            } else if (ataqueFinalJogador2 > ataqueFinalJogador1) {
                // Escrever quem ganha, dano causa, remover vida, ajustar o display da vida
                caixadetexto.innerText += personagemJogador2 + " vence! ¬ª Dano causado: " + jogador2Dano;
                vidaJogador1 -= jogador2Dano;
                document.getElementById('vidaJogador1').textContent = vidaJogador1;
                alert(personagemJogador2 + " vence!\nAtaque final de " + personagemJogador1 + ": " + ataqueFinalJogador1 + "\nAtaque final de " + personagemJogador2 + ": " + ataqueFinalJogador2 + '\n\nDano causado: ' + jogador2Dano);
            } else {
                // Escrever quem ganha, dano causa, remover vida, ajustar o display da vida
                caixadetexto.innerText += "Empate!";
                alert('Empate!\nAtaque final de ' + personagemJogador1 + ": " + ataqueFinalJogador1 + "\nAtaque final de " + personagemJogador2 + ": " + ataqueFinalJogador2);
            }
    });

    // Elton //
    //
    function copiarDeckDojogador1ParaOJogador2() {
        document.getElementById('personagemJogador2').innerHTML = document.getElementById('personagemJogador1').innerHTML;
    }

    function criarOptionsParaOSelectDojogador1() { // Incompleta
        let x = document.getElementById('personagemJogador1');
        
        for (let i in personagens) {
        console.log(`Personagem: ${i}`);
        console.log(`Pot√™ncia: ${personagens[i].potencia}`);
        console.log(`Dano: ${personagens[i].dano}`);
        console.log(`Habilidade: ${personagens[i].habilidade}`);
        console.log('---');
        }
    }

    function atualizarCard(e) {
        let idrecebido = e;
        let x = document.getElementById(idrecebido).value;
        document.getElementById(idrecebido + 'nome').innerText = personagens[x].nome;
        document.getElementById(idrecebido + 'clan').src = personagens[x].clan;
        document.getElementById(idrecebido + 'imagem').src = personagens[x].imagem;
        document.getElementById(idrecebido + 'level').src = personagens[x].level;
        document.getElementById(idrecebido + 'potencia').innerText = personagens[x].potencia;
        document.getElementById(idrecebido + 'dano').innerText = personagens[x].dano;
        document.getElementById(idrecebido + 'habilidade').innerText = personagens[x].habilidade;
        document.getElementById(idrecebido + 'bonus').innerText = personagens[x].bonus;
        document.getElementById(idrecebido + 'edicao').innerText = personagens[x].edicao;

        
    }

    // Fun√ß√µes Start //
    //criarOptionsParaOSelectDojogador1();
    copiarDeckDojogador1ParaOJogador2();
</script>
</body>
</html>
<!--
Bugs Conhecidos:
Uma pot√™ncia/dano/ataque menor que o m√≠nimo de um oponente que a reduz, eleva o atributo at√© o valor m√≠nimo (ex: dano 0 contra Pussycats torna o dano 1, que o m√≠nimo das Pussycats)
üé© Montana
üíé Uppers
-->
